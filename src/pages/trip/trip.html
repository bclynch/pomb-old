<PageWrapper>
  <div *ngIf="inited" class="initedLayer">
    <agm-map 
      [zoomControl]="false"
      [disableDefaultUI]="true"
      [streetViewControl]="false"
      [fitBounds]="latlngBounds"
      [styles]=mapStyle
    >
      <agm-marker 
        *ngFor= "let marker of junctureMarkers;"
        [latitude]= "marker.lat" 
        [longitude]= "marker.lon" 
        (markerClick)="AgmMap.lastOpen?.close(); AgmMap.lastOpen = infoWindow;"
      >
        <!-- <agm-info-window [disableAutoPan]="true" #infoWindow>
          <map-popover [data]="marker" [config]="config"></map-popover>
        </agm-info-window> -->
      </agm-marker>
      <agm-polyline
        [editable]="false"
        strokeColor="#934000"
        strokeWeight="3"
      >
        <agm-polyline-point *ngFor="let point of junctureMarkers" [latitude]="point.lat" [longitude]="point.lon"></agm-polyline-point>
      </agm-polyline>
    </agm-map>
    <div class="juncturePane">
      <div class="paneHeader">
        <BackpackIcon color="purple" title="Add To Pack"></BackpackIcon>
        <div *ngIf="tripData.userToTripsByTripId.nodes[0].accountByUserId.firstName">{{tripData.userToTripsByTripId.nodes[0].accountByUserId.firstName}} {{tripData.userToTripsByTripId.nodes[0].accountByUserId.lastName}}</div>
        <div *ngIf="!tripData.userToTripsByTripId.nodes[0].accountByUserId.firstName">{{tripData.userToTripsByTripId.nodes[0].accountByUserId.username}}</div>
      </div>
      <div 
        class="paneBanner"
        [ngStyle]="tripData.bannerPhoto ? { 'background-image': 'url(' + tripData.bannerPhoto + ')'} : { 'background-image': 'url(' + defaultPhoto + ')'}"
      ></div>
      <div class="paneJunctureTracker">
        <div class="trackerWrapper">
          <div class="junctureContainer" *ngFor="let juncture of tripData.tripToJuncturesByTripId.nodes">
            <div>{{juncture.junctureByJunctureId.name}}</div>
          </div>
        </div>
      </div>
      <div class="paneContent">
        <div class="junctureDescription"></div>
        <div class="junctureGallery"></div>
        <div class="juncturePosts"></div>
      </div>
    </div>
  </div>
</PageWrapper>

